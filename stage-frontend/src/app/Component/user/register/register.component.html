<div class="registration-container">
  <div class="floating-elements">
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
  </div>

  <div class="header">
    <h1>‚ú® Inscription</h1>
    <p>Cr√©ez un nouveau compte utilisateur ou enseignant</p>
  </div>

  <!-- Success/Error Messages -->
  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div class="toggle-section">
    <div class="toggle-option">
      <input 
        type="radio" 
        id="user" 
        name="formType" 
        value="user" 
        [checked]="!isAddingTeacher"
        (change)="onToggleForm('user')"
      />
      <label for="user" class="toggle-label">üë§ Ajouter Utilisateur</label>
    </div>
    <div class="toggle-option">
      <input 
        type="radio" 
        id="teacher" 
        name="formType" 
        value="teacher"
        [checked]="isAddingTeacher"
        (change)="onToggleForm('teacher')"
      />
      <label for="teacher" class="toggle-label">üéì Ajouter Enseignant</label>
    </div>
    <div class="toggle-slider" [class.teacher]="isAddingTeacher"></div>
  </div>

  <!-- User Form -->
  <form 
    *ngIf="!isAddingTeacher" 
    [formGroup]="userForm" 
    (ngSubmit)="onSubmitUser()" 
    class="form-section"
    [class.loading]="isSubmittingUser"
  >
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Nom d'utilisateur <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input" 
          formControlName="username" 
          placeholder="Entrez le nom d'utilisateur"
        />
        <div class="form-hint">Minimum 3 caract√®res</div>
        <div *ngIf="userForm.get('username')?.invalid && userForm.get('username')?.touched" class="form-hint required">
          Le nom d'utilisateur est requis (min. 3 caract√®res)
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Matricule <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input" 
          formControlName="matricule" 
          placeholder="Entrez le matricule"
        />
        <div *ngIf="userForm.get('matricule')?.invalid && userForm.get('matricule')?.touched" class="form-hint required">
          Le matricule est requis (min. 3 caract√®res)
        </div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Adresse e-mail <span class="required">*</span></label>
      <input 
        type="email" 
        class="form-input" 
        formControlName="email" 
        placeholder="exemple@domaine.com"
      />
      <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="form-hint required">
        Veuillez entrer une adresse e-mail valide
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Mot de passe <span class="required">*</span></label>
        <input 
          type="password" 
          class="form-input" 
          formControlName="password" 
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
        />
        <div class="form-hint">Minimum 6 caract√®res</div>
        <div *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched" class="form-hint required">
          Le mot de passe doit contenir au moins 6 caract√®res
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">R√¥le <span class="required">*</span></label>
        <select class="form-select" formControlName="role">
          <option value="SUPER_ADMIN">SUPER_ADMIN</option>
          <option value="ADMIN">ADMIN</option>
          <option value="ENSEIGNANT">ENSEIGNANT</option>
        </select>
      </div>
    </div>

    <button 
      type="submit" 
      class="submit-btn" 
      [disabled]="userForm.invalid || isSubmittingUser"
    >
      <span *ngIf="!isSubmittingUser">‚ú® Cr√©er l'utilisateur</span>
      <span *ngIf="isSubmittingUser">‚è≥ Cr√©ation en cours...</span>
    </button>
  </form>

  <!-- Teacher Form (nouveau) -->
  <form 
    *ngIf="isAddingTeacher" 
    [formGroup]="enseignantForm" 
    (ngSubmit)="onSubmitEnseignant()" 
    class="form-section"
    [class.loading]="isSubmittingTeacher"
  >
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Nom d'utilisateur <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input" 
          formControlName="username" 
          placeholder="Entrez le nom d'utilisateur"
        />
        <div *ngIf="enseignantForm.get('username')?.invalid && enseignantForm.get('username')?.touched" class="form-hint required">
          Le nom d'utilisateur est requis (min. 3 caract√®res)
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Matricule <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input" 
          formControlName="matricule" 
          placeholder="Entrez le matricule"
        />
        <div *ngIf="enseignantForm.get('matricule')?.invalid && enseignantForm.get('matricule')?.touched" class="form-hint required">
          Le matricule est requis (min. 3 caract√®res)
        </div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Adresse e-mail <span class="required">*</span></label>
      <input 
        type="email" 
        class="form-input" 
        formControlName="email" 
        placeholder="exemple@domaine.com"
      />
      <div *ngIf="enseignantForm.get('email')?.invalid && enseignantForm.get('email')?.touched" class="form-hint required">
        Veuillez entrer une adresse e-mail valide
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Mot de passe <span class="required">*</span></label>
      <input 
        type="password" 
        class="form-input" 
        formControlName="password" 
        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
      />
      <div *ngIf="enseignantForm.get('password')?.invalid && enseignantForm.get('password')?.touched" class="form-hint required">
        Le mot de passe doit contenir au moins 6 caract√®res
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">T√©l√©phone <span class="required">*</span></label>
      <input 
        type="tel" 
        class="form-input" 
        formControlName="telephone" 
        placeholder="+216 XX XXX XXX"
      />
      <div *ngIf="enseignantForm.get('telephone')?.invalid && enseignantForm.get('telephone')?.touched" class="form-hint required">
        Le num√©ro de t√©l√©phone est requis
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Grade <span class="required">*</span></label>
      <div class="grade-options">
        <div class="grade-option">
          <input type="radio" id="cup" formControlName="grade" value="CUP" />
          <label for="cup">CUP</label>
        </div>
        <div class="grade-option">
          <input type="radio" id="efa" formControlName="grade" value="EFA" />
          <label for="efa">EFA</label>
        </div>
        <div class="grade-option">
          <input type="radio" id="ef" formControlName="grade" value="EF" />
          <label for="ef">EF</label>
        </div>
        <div class="grade-option">
          <input type="radio" id="chefdep" formControlName="grade" value="CHEFDEP" />
          <label for="chefdep">CHEFDEP</label>
        </div>
      </div>
      <div *ngIf="enseignantForm.get('grade')?.invalid && enseignantForm.get('grade')?.touched" class="form-hint required">
        Veuillez s√©lectionner un grade
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Unit√© P√©dagogique <span class="required">*</span></label>
      <select class="form-select" formControlName="unitePedagogiqueId">
        <option value="">-- S√©lectionnez une unit√© --</option>
        <option *ngFor="let up of unitePedagogiques" [value]="up.id">{{ up.libelle }}</option>
      </select>
      <div *ngIf="enseignantForm.get('unitePedagogiqueId')?.invalid && enseignantForm.get('unitePedagogiqueId')?.touched" class="form-hint required">
        Veuillez s√©lectionner une unit√© p√©dagogique
      </div>
    </div>

    

    <button 
      type="submit" 
      class="submit-btn" 
      [disabled]="enseignantForm.invalid || isSubmittingTeacher"
    >
      <span *ngIf="!isSubmittingTeacher">üéì Cr√©er l'enseignant</span>
      <span *ngIf="isSubmittingTeacher">‚è≥ Cr√©ation en cours...</span>
    </button>
  </form>
</div>
